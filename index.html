<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNS 마케팅 메이트 - AI 자동 생성기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #09f;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #output-container h2 { font-size: 1.5rem; font-weight: 700; margin-top: 1.5rem; margin-bottom: 0.75rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
        #output-container h3 { font-size: 1.25rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: 0.5rem; }
        #output-container p { margin-bottom: 1rem; line-height: 1.7; }
        #output-container ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        #output-container li { margin-bottom: 0.5rem; }
        .output-tab-btn.active {
            border-color: #3b82f6;
            color: #3b82f6;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">🚀 SNS 마케팅 메이트</h1>
            <p class="mt-2 text-gray-600">AI가 만드는 맞춤형 SNS 마케팅 기획서 & 지침서</p>
            <!-- 설명서 링크 추가 -->
            <p class="mt-4"><a href="gems_mn.html" target="_blank" class="text-sm text-blue-600 hover:underline">📘 사용 설명서 보기</a></p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- 입력 폼 섹션 -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <form id="marketing-form">
                    <!-- 1. 상품 기본 정보 -->
                    <fieldset class="mb-6">
                        <legend class="text-xl font-bold text-blue-600 border-b-2 border-blue-200 pb-2 mb-4 w-full">1. 상품 기본 정보</legend>
                        <div class="space-y-4">
                            <div><label for="product-name" class="block text-sm font-medium text-gray-700 mb-1">상품명</label><input type="text" id="product-name" class="w-full p-2 border border-gray-300 rounded-md" placeholder="예: 허니 라벤더 수제 비누" required></div>
                            <div><label for="brand-name" class="block text-sm font-medium text-gray-700 mb-1">브랜드명 <span class="font-normal text-gray-500">(선택)</span></label><input type="text" id="brand-name" class="w-full p-2 border border-gray-300 rounded-md" placeholder="예: 꿀벌의 선물"></div>
                            <div><label for="product-strengths" class="block text-sm font-medium text-gray-700 mb-1">상품의 강점 (키워드)</label><input type="text" id="product-strengths" class="w-full p-2 border border-gray-300 rounded-md" placeholder="예: #천연성분, #디자인패키지"></div>
                            <div><label for="business-schedule" class="block text-sm font-medium text-gray-700 mb-1">비즈니스의 주요 일정</label><textarea id="business-schedule" rows="3" class="w-full p-2 border border-gray-300 rounded-md" placeholder="예: 12월 크리스마스 시즌 신제품 출시, 내년 3월 팝업스토어 오픈"></textarea></div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">마케팅 목표 (최대 2개 선택)</label>
                                <div class="grid grid-cols-2 gap-x-4 gap-y-2 mt-2">
                                    <label class="flex items-center"><input type="checkbox" name="marketing-goal" value="브랜드 인지도 상승" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">브랜드 인지도 상승</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="marketing-goal" value="신규 고객 확보" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">신규 고객 확보</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="marketing-goal" value="재구매율/충성도 증가" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">재구매율/충성도 증가</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="marketing-goal" value="웹사이트 트래픽 증가" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">웹사이트 트래픽 증가</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="marketing-goal" value="제품/서비스 판매 증진" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">제품/서비스 판매 증진</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="marketing-goal" value="잠재고객(리드) 확보" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">잠재고객(리드) 확보</span></label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">GEMS 지침서 어투 지정</label>
                                <div class="grid grid-cols-2 gap-x-4 gap-y-2 mt-2">
                                    <label class="flex items-center"><input type="checkbox" name="gems-tone" value="친절하고 격려하는" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">친절하고 격려하는</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="gems-tone" value="전문적이고 신뢰감 있는" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">전문적이고 신뢰감 있는</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="gems-tone" value="재미있고 유쾌한" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">재미있고 유쾌한</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="gems-tone" value="직설적이고 명료한" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">직설적이고 명료한</span></label>
                                    <label class="flex items-center"><input type="checkbox" name="gems-tone" value="정감있고 따뜻한" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"><span class="ml-2 text-sm">정감있고 따뜻한</span></label>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <!-- 2. 우리의 고객은 누구일까요? -->
                    <fieldset class="mb-6">
                        <legend class="text-xl font-bold text-blue-600 border-b-2 border-blue-200 pb-2 mb-4 w-full">2. 우리의 고객은 누구일까요?</legend>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">인구 통계</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <select id="target-age" class="w-full p-2 border border-gray-300 rounded-md">
                                        <option value="">연령대</option>
                                        <option value="10대">10대</option>
                                        <option value="20대 초반">20대 초반</option>
                                        <option value="20대 후반 ~ 30대 초반">20대 후반 ~ 30대 초반</option>
                                        <option value="30대 후반 ~ 40대 초반">30대 후반 ~ 40대 초반</option>
                                        <option value="40대 후반 ~ 50대 초반">40대 후반 ~ 50대 초반</option>
                                        <option value="50대 후반 ~ 60대 초반">50대 후반 ~ 60대 초반</option>
                                        <option value="60대 이상">60대 이상</option>
                                    </select>
                                    <select id="target-gender" class="w-full p-2 border border-gray-300 rounded-md">
                                        <option value="">성별</option>
                                        <option value="여성">여성</option>
                                        <option value="남성">남성</option>
                                        <option value="모두">모두</option>
                                    </select>
                                </div>
                            </div>
                            <div><label for="target-lifestyle" class="block text-sm font-medium text-gray-700 mb-1">생활 모습 & 특징 (키워드)</label><input type="text" id="target-lifestyle" class="w-full p-2 border border-gray-300 rounded-md" placeholder="예: #감성소품, #홈카페, #자기관리"></div>
                        </div>
                    </fieldset>
                    <button type="submit" class="w-full mt-8 bg-blue-600 text-white font-bold py-3 px-4 rounded-md hover:bg-blue-700">기획서 & GEMS 지침서 동시 생성 🚀</button>
                    <!-- 저장된 정보 삭제 버튼 추가 -->
                    <button type="button" id="clear-form-btn" class="w-full mt-2 bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-md hover:bg-gray-300 text-sm">입력 내용 초기화</button>
                </form>
            </div>

            <!-- 결과 출력 섹션 -->
            <div id="output-section" class="bg-white p-6 rounded-lg shadow-md lg:col-span-1">
                <div id="loading-indicator" class="hidden justify-center items-center h-full">
                    <div class="text-center"><div class="spinner mx-auto"></div><p class="mt-4 text-gray-600">AI가 분석 및 작성을 진행 중입니다...</p></div>
                </div>
                
                <div id="output-container" class="prose max-w-none hidden">
                    <!-- Output Tab Navigation -->
                    <div class="mb-4 border-b border-gray-200">
                        <nav class="-mb-px flex space-x-4 justify-between items-center" aria-label="Tabs">
                            <div class="flex space-x-4">
                                <button id="output-tab-planner-btn" class="output-tab-btn active whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                    마케팅 기획서
                                </button>
                                <button id="output-tab-gems-btn" class="output-tab-btn whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                    Gemini용 GEMS 지침서
                                </button>
                            </div>
                            <button id="copy-gems-btn" class="hidden bg-purple-100 text-purple-700 font-bold py-1 px-3 rounded-md hover:bg-purple-200 text-sm">📋 지침서 복사</button>
                        </nav>
                    </div>

                    <!-- Output Tab Content -->
                    <div id="output-tab-planner-content"></div>
                    <div id="output-tab-gems-content" class="hidden"></div>
                </div>
                
                <div id="welcome-message" class="text-center flex flex-col justify-center items-center h-full text-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mb-4" fill="none" viewBox="http://www.w3.org/2000/svg" class="h-16 w-16 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    <h2 class="text-xl font-semibold">결과물이 여기에 생성됩니다.</h2>
                    <p class="mt-2">왼쪽 폼에 정보를 입력하고 '생성하기' 버튼을 눌러주세요.</p>
                </div>
                
                <button id="download-btn" class="hidden w-full mt-4 bg-gray-700 text-white font-bold py-2 px-4 rounded-md hover:bg-gray-800">📄 다운로드</button>
            </div>
        </main>
    </div>

    <script>
        const API_KEY = "AIzaSyA9bYqzolO-V_UHa88ZMI06BMNHPimQd8c"; 

        const form = document.getElementById('marketing-form');
        const outputContainer = document.getElementById('output-container');
        const loadingIndicator = document.getElementById('loading-indicator');
        const welcomeMessage = document.getElementById('welcome-message');
        const downloadBtn = document.getElementById('download-btn');
        let plannerRawMarkdown = '';
        let gemsRawMarkdown = '';

        // Output Tab Elements
        const outputTabPlannerBtn = document.getElementById('output-tab-planner-btn');
        const outputTabGemsBtn = document.getElementById('output-tab-gems-btn');
        const outputTabPlannerContent = document.getElementById('output-tab-planner-content');
        const outputTabGemsContent = document.getElementById('output-tab-gems-content');
        const copyGemsBtn = document.getElementById('copy-gems-btn');
        const clearFormBtn = document.getElementById('clear-form-btn'); // 초기화 버튼 요소

        // --- localStorage 관련 코드 시작 ---

        const FORM_DATA_KEY = 'snsMarketingMateFormData';

        // 폼 데이터를 localStorage에 저장하는 함수
        function saveFormData() {
            const formData = {
                productName: document.getElementById('product-name').value,
                brandName: document.getElementById('brand-name').value,
                productStrengths: document.getElementById('product-strengths').value,
                businessSchedule: document.getElementById('business-schedule').value,
                marketingGoal: Array.from(document.querySelectorAll('input[name="marketing-goal"]:checked')).map(cb => cb.value),
                gemsTone: Array.from(document.querySelectorAll('input[name="gems-tone"]:checked')).map(cb => cb.value),
                targetAge: document.getElementById('target-age').value,
                targetGender: document.getElementById('target-gender').value,
                targetLifestyle: document.getElementById('target-lifestyle').value,
            };
            localStorage.setItem(FORM_DATA_KEY, JSON.stringify(formData));
            console.log("Form data saved:", formData); // 저장 확인용 로그
        }

        // localStorage에서 폼 데이터를 불러와 채우는 함수
        function loadFormData() {
            const savedData = localStorage.getItem(FORM_DATA_KEY);
            if (savedData) {
                try {
                    const formData = JSON.parse(savedData);
                    console.log("Form data loaded:", formData); // 불러오기 확인용 로그
                    document.getElementById('product-name').value = formData.productName || '';
                    document.getElementById('brand-name').value = formData.brandName || '';
                    document.getElementById('product-strengths').value = formData.productStrengths || '';
                    document.getElementById('business-schedule').value = formData.businessSchedule || '';
                    document.getElementById('target-age').value = formData.targetAge || '';
                    document.getElementById('target-gender').value = formData.targetGender || '';
                    document.getElementById('target-lifestyle').value = formData.targetLifestyle || '';

                    // 마케팅 목표 체크박스 복원
                    document.querySelectorAll('input[name="marketing-goal"]').forEach(checkbox => {
                        checkbox.checked = formData.marketingGoal?.includes(checkbox.value) || false;
                    });

                    // GEMS 어투 체크박스 복원
                    document.querySelectorAll('input[name="gems-tone"]').forEach(checkbox => {
                        checkbox.checked = formData.gemsTone?.includes(checkbox.value) || false;
                    });
                } catch (e) {
                    console.error("Error parsing saved form data:", e);
                    localStorage.removeItem(FORM_DATA_KEY); // 잘못된 데이터 삭제
                }
            } else {
                 console.log("No saved form data found."); // 저장된 데이터 없음 로그
            }
        }

        // 페이지 로드 시 폼 데이터 불러오기
        document.addEventListener('DOMContentLoaded', loadFormData);

        // 폼 입력 시 데이터 자동 저장
        form.addEventListener('input', saveFormData); // 텍스트 입력 필드
        form.addEventListener('change', saveFormData); // select, checkbox 변경 시

        // 초기화 버튼 클릭 시 localStorage 데이터 삭제 및 폼 리셋
        clearFormBtn.addEventListener('click', () => {
            if (confirm('입력된 모든 내용과 저장된 정보가 삭제됩니다. 초기화하시겠습니까?')) {
                localStorage.removeItem(FORM_DATA_KEY);
                form.reset(); // 폼 필드를 기본값으로 리셋
                console.log("Form data cleared."); // 삭제 확인용 로그
            }
        });

        // --- localStorage 관련 코드 끝 ---


        outputTabPlannerBtn.addEventListener('click', () => {
            outputTabPlannerContent.classList.remove('hidden');
            outputTabGemsContent.classList.add('hidden');
            outputTabPlannerBtn.classList.add('active');
            outputTabGemsBtn.classList.remove('active');
            copyGemsBtn.classList.add('hidden');
            if(plannerRawMarkdown) {
                downloadBtn.classList.remove('hidden');
                downloadBtn.textContent = '📄 기획서 다운로드 (.md)';
            } else {
                 downloadBtn.classList.add('hidden'); // 내용 없으면 다운로드 버튼 숨김
            }
        });

        outputTabGemsBtn.addEventListener('click', () => {
            outputTabGemsContent.classList.remove('hidden');
            outputTabPlannerContent.classList.add('hidden');
            outputTabGemsBtn.classList.add('active');
            outputTabPlannerBtn.classList.remove('active');
            if(gemsRawMarkdown) {
                copyGemsBtn.classList.remove('hidden');
                downloadBtn.classList.remove('hidden');
                downloadBtn.textContent = '📄 지침서 다운로드 (.txt)';
            } else {
                 copyGemsBtn.classList.add('hidden'); // 내용 없으면 버튼 숨김
                 downloadBtn.classList.add('hidden');
            }
        });
        
        const goalCheckboxes = document.querySelectorAll('input[name="marketing-goal"]');
        goalCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                const checkedCount = document.querySelectorAll('input[name="marketing-goal"]:checked').length;
                if (checkedCount > 2) {
                    checkbox.checked = false;
                    // 자동 저장 함수 다시 호출하여 변경사항 즉시 반영
                    saveFormData();
                }
            });
        });

        async function generateContent(prompt, filenameBase) {
            welcomeMessage.style.display = 'none';
            outputContainer.classList.add('hidden');
            outputTabPlannerContent.innerHTML = '';
            outputTabGemsContent.innerHTML = '';
            loadingIndicator.style.display = 'flex';
            downloadBtn.classList.add('hidden');
            copyGemsBtn.classList.add('hidden');
            plannerRawMarkdown = '';
            gemsRawMarkdown = '';


            try {
                if (API_KEY === "") {
                    throw new Error('죄송합니다. 현재 서비스에 연결된 API 키가 없습니다. 관리자에게 문의해주세요.');
                }
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
                
                const payload = { contents: [{ parts: [{ text: prompt }] }] };

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    let errorDetails = `API Error: ${response.status} ${response.statusText}`;
                    try { const errorData = await response.json(); if (errorData.error && errorData.error.message) { errorDetails = errorData.error.message; } } catch (e) {}
                    throw new Error(errorDetails);
                }

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const generatedText = candidate.content.parts[0].text;
                    
                    const separator = '---[GEMS_GUIDE_START]---';
                    const parts = generatedText.split(separator);
                    
                    plannerRawMarkdown = parts[0] || "마케팅 기획서를 생성하지 못했습니다.";
                    gemsRawMarkdown = parts[1] || "GEMS 지침서를 생성하지 못했습니다.";
                    
                    outputTabPlannerContent.innerHTML = marked.parse(plannerRawMarkdown);
                    outputTabGemsContent.innerHTML = marked.parse(gemsRawMarkdown);
                    
                    // Show the results
                    outputContainer.classList.remove('hidden');
                    outputTabPlannerBtn.click(); // Default to planner tab
                } else {
                     let errorMessage = "API 응답에서 콘텐츠를 찾을 수 없습니다.";
                       if(candidate && candidate.finishReason && candidate.finishReason !== "STOP") {
                         errorMessage = `AI가 응답 생성을 완료하지 못했습니다. (이유: ${candidate.finishReason})`;
                       }
                       throw new Error(errorMessage);
                }
            } catch (error) {
                console.error("자세한 오류 정보:", error);
                welcomeMessage.style.display = 'flex'; // 오류 시 웰컴 메시지 영역 사용
                welcomeMessage.innerHTML = `<div class="text-red-500 text-center"><p>죄송합니다. 생성 중 오류가 발생했습니다.</p><p class="text-sm mt-2 font-bold">[오류 원인]</p><p class="text-sm mt-1 bg-red-50 p-2 rounded">${error.message}</p></div>`;
                 outputContainer.classList.add('hidden'); // 오류 시 결과 컨테이너 숨김
            } finally {
                loadingIndicator.style.display = 'none';
            }
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const checkedGoals = Array.from(document.querySelectorAll('input[name="marketing-goal"]:checked')).map(cb => cb.value);
            const checkedTones = Array.from(document.querySelectorAll('input[name="gems-tone"]:checked')).map(cb => cb.value);

            const formData = {
                productName: document.getElementById('product-name').value,
                brandName: document.getElementById('brand-name').value, // 브랜드명 추가
                productStrengths: document.getElementById('product-strengths').value,
                businessSchedule: document.getElementById('business-schedule').value,
                marketingGoal: checkedGoals.length > 0 ? checkedGoals.join(', ') : '지정되지 않음',
                gemsTone: checkedTones.length > 0 ? checkedTones.join(', ') : '친절하고 격려하는',
                targetAge: document.getElementById('target-age').value,
                targetGender: document.getElementById('target-gender').value,
                targetLifestyle: document.getElementById('target-lifestyle').value,
            };
            
            // 데이터 제출 시에도 저장 (만약을 대비)
            saveFormData();
            
            const brandInfo = formData.brandName ? `'${formData.brandName}' 브랜드의 ` : ''; // 브랜드명 있으면 추가

            const finalPrompt = `
                당신은 최고의 마케팅 전략가이자, 수강생을 위한 친절한 AI 가이드 작성 전문가입니다.
                다음 정보를 바탕으로 **[마케팅 기획서]**와 **[Gemini용 GEMS 지침서]**를 순서대로 작성해 주세요.
                두 결과물 사이에는 반드시 다음 구분자를 삽입해 주세요: ---[GEMS_GUIDE_START]---

                ### **[사용자 입력 정보]**
                - 상품명: ${formData.productName}
                - 브랜드명: ${formData.brandName || '지정되지 않음'}
                - 강점: ${formData.productStrengths}
                - 마케팅 목표: ${formData.marketingGoal}
                - 비즈니스 주요 일정: ${formData.businessSchedule}
                - GEMS 어투: ${formData.gemsTone}
                - 우리의 고객: ${formData.targetAge} ${formData.targetGender}
                - 고객 생활 모습: ${formData.targetLifestyle}
                
                ---
                
                ### **[AI 수행 과제 1: 마케팅 기획서 작성]**
                아래 목차에 따라 상세하고 전문적인 마케팅 기획서를 Markdown 형식으로 작성해 주세요.
                - ## 📝 마케팅 기획서: ${brandInfo}${formData.productName}
                - ### 1. 시장 및 경쟁 환경 분석
                    - (${brandInfo}${formData.productName} 상품 관련 시장 트렌드와 경쟁사 2곳 분석, 차별화 포인트 제안)
                - ### 2. 우리의 고객 분석
                    - #### 2-1. 상세 라이프스타일 묘사
                        - (입력된 키워드 '${formData.targetLifestyle}'를 바탕으로 '${formData.targetAge} ${formData.targetGender}' 고객의 하루, 주말, 관심사 등을 구체적으로 묘사)
                    - #### 2-2. 라이프스타일 대표 해시태그
                        - (위에서 묘사된 라이프스타일을 잘 나타내는 해시태그 5가지 제안)
                    - #### 2-3. 핵심 가치 제안
                        - (우리 ${brandInfo}상품이 이 고객에게 어떤 특별한 가치를 제공하는지 명확히 정의)
                    - #### 2-4. 고객 변화 가설 (Before & After)
                        - **(Before):** 우리를 만나기 전 고객이 겪는 불편함이나 아쉬움은 무엇일까?
                        - **(After):** 우리 상품/브랜드를 만난 후 고객의 삶이 어떻게 긍정적으로 변화할까? (구체적인 변화 + 감성적 만족감)
                    - #### 2-5. 변화 가설 해시태그
                        - (위의 긍정적인 변화를 상징하는 해시태그 3가지 제안)
                - ### 3. 포지셔닝 및 컨셉
                    - (모든 정보를 종합하여 핵심 컨셉 또는 슬로건을 5가지 제안해주세요)
                - ### 4. 추천 해시태그 전략
                    - (상품/브랜드 관련 핵심 해시태그 5가지 제안)
                    - (위 '2-2', '2-5'에서 제안된 라이프스타일 및 변화 해시태그를 포함하여 총 10개 내외의 해시태그 조합 전략 제시)


                ---[GEMS_GUIDE_START]---

                ### **[AI 수행 과제 2: Gemini용 GEMS 지침서 작성]**
                위 **[사용자 입력 정보]**와 **[마케팅 기획서의 핵심 내용]**(특히 '우리의 고객 분석'과 '포지셔닝 및 컨셉')을 바탕으로, 수강생이 자신의 Gemini(Gems)의 '지침(Instructions)'에 그대로 복사해서 붙여넣을 수 있는 **완성된 GEMS 지침서**를 Markdown 형식으로 작성해 주세요. 이 지침서는 강사님이 요청한 아래 항목들을 중심으로 Gemini가 작동하도록 만들어져야 합니다.
                
                - ## Gemini를 위한 맞춤형 GEMS 지침서 📋
                - ### **❗ 당신이 반드시 기억해야 할 5가지 핵심 포인트**
                - 1. **비즈니스 목표 달성:** 모든 아이디어는 우리의 핵심 목표인 **'${formData.marketingGoal}'**에 기여해야 합니다.
                - 2. **시의성 확보:** 다가오는 **주요 기념일**(명절, 어버이날, 크리스마스 등)과 우리의 주요 일정(**'${formData.businessSchedule || '특별한 일정 없음'}'**)을 항상 고려하여 시기적절한 마케팅 아이디어를 제안해주세요.
                - 3. **문제 해결 및 가치 전달:** 우리 고객이 겪는 문제점을 파악하고, '${brandInfo}${formData.productName}' 상품이 어떻게 그 문제를 해결하고 어떤 **핵심 가치**를 제공하는지에 집중하여 솔루션을 제공하는 관점으로 접근해주세요. (마케팅 기획서의 '핵심 가치 제안' 내용 참고)
                - 4. **고객 변화 강조:** 우리 상품/브랜드를 만난 후 고객의 삶이 어떻게 긍정적으로 변화하는지(**Before & After**)를 항상 염두에 두고 콘텐츠에 녹여내세요. (마케팅 기획서의 '고객 변화 가설' 내용 참고)
                - 5. **차별화:** 마케팅 기획서의 경쟁사 분석 내용을 바탕으로, 항상 경쟁사와는 다른 우리만의 독창적인 아이디어를 제안해주세요.

                - ### **1. 고객 정의 및 역할 부여 (Customer Definition & Role Assignment)**
                    - **[핵심 고객]** 당신이 공략해야 할 핵심 고객은 **'${formData.targetAge} ${formData.targetGender}'**이며, **'${formData.targetLifestyle}'**와 같은 생활 모습을 가지고 있습니다. 이들은 '${brandInfo}${formData.productName}' 상품의 **'${formData.productStrengths}'**와 같은 강점에 매력을 느낄 가능성이 높습니다. (마케팅 기획서의 '상세 라이프스타일 묘사' 참고)
                    - **[역할]** 당신은 이 고객의 가장 친한 친구이자 최고의 조언가입니다. 항상 이 고객의 입장에서 생각하고, 그들의 고민을 해결해주며, 그들이 좋아할 만한 방식으로 대화하고 아이디어를 제안해야 합니다.
                    - **[명령어]** 제가 '고객 시점'이라고 말하면, 이 고객에 빙의해서 '${brandInfo}${formData.productName}' 상품에 대해 어떻게 생각하는지 1인칭 시점으로 이야기해주세요.

                - ### **2. 이벤트 기획 (Event Planning)**
                    - 제가 '이벤트 기획'을 요청하면, 위에서 정의된 핵심 고객이 열광적으로 참여할 만한 창의적인 SNS 이벤트를 5가지 이상 제안해주세요. (참여 방법 포함, 경품 아이디어는 **반드시 '${brandInfo}${formData.productName}' 상품 또는 이와 관련된 상품/서비스**로 제안할 것, 핵심 포인트 고려)

                - ### **3. 콘텐츠 기획 (Content Planning)**
                    - 제가 '콘텐츠 기획'을 요청하면, 상품의 핵심 강점(${formData.productStrengths})과 **핵심 가치**를 어필할 수 있는 SNS 콘텐츠 아이디어를 5가지 이상 제안해주세요. (인스타그램 릴스, 블로그 포스팅 등 채널과 형식 포함, 핵심 포인트 고려)

                - ### **4. 어떤 글 쓸까? (Topic Suggestion & Prompt)**
                    - 제가 "어떤 글 쓸까?"라고 질문하면, **핵심 포인트**(특히 '시의성', '문제 해결', '고객 변화')를 고려하여 고객이 좋은 경험을 하거나 가치를 충분히 느낄 수 있는 콘텐츠 **제목 3~5가지**를 제안해주세요. 그리고 각 제목별로 어울리는 **영상 프롬프트**를 **한국어**와 **영어**로 각각 작성해주세요.

                - ### **5. 요즘 유행 따라잡기 (Trend Hunter)**
                    - 제가 "요즘 유행"과 함께 특정 주제(예: 농산물, 건강)를 언급하면, 현재 SNS에서 유행하는 챌린지, 밈(meme), 인기 음원 등을 우리 ${brandInfo}상품/고객과 연결하여 활용할 수 있는 아이디어를 3가지 이상 제안해주세요.

                - ### **6. 손님과 소통 아이디어 (Community Engagement Ideas)**
                    - 제가 "소통 아이디어"를 요청하면, 인스타그램 스토리나 댓글을 통해 고객들과 자연스럽게 소통하고 참여를 유도할 수 있는 질문, 투표 주제, 간단한 퀴즈 등을 5가지 이상 제안해주세요.

                - ### **7. 팔로워 발굴 (Follower Discovery)**
                    - 제가 '팔로워 발굴'을 요청하면, 우리 ${brandInfo}상품과 관련된 잠재 고객을 찾을 수 있는 최신 트렌드 키워드와 해시태그(마케팅 기획서의 '추천 해시태그 전략' 참고)를 10가지 이상 추천해주세요.

                - ### **8. 영상 프롬프트 추천 (Video Prompt Recommendation)**
                    - 제가 '영상 프롬프트'와 함께 영상 주제와 스타일을 알려주면, AI 영상 생성에 활용할 수 있는 상세한 프롬프트 5가지를 한국어와 영어로 제안해주세요. (핵심 포인트 중 '고객 변화'나 '가치 전달'을 강조하는 방향으로)
                
                - ### **9. 인스타 프로필 추천 (Instagram Profile Recommendation)**
                    - 제가 '인스타 프로필'을 요청하면, ${brandInfo}상품의 핵심 강점, **핵심 가치**, 고객의 특성을 녹여서, 사람들의 시선을 사로잡는 인스타그램 소개글을 **134자 이내**로 3가지 버전으로 만들어주세요.

                - ### **10. 인스타그램 글 (Instagram Post Writing)**
                    - 제가 '인스타그램 글'과 함께 주제나 사진에 대해 설명하면, 매력적인 **<제목>**과 함께, **핵심 가치**와 **고객 변화**를 강조하며 감성적인 문구와 유용한 정보를 조화롭게 섞은 **<캡션>**을 작성해주세요. 그리고 그 게시물에 어울리는 필수 **<해시태그>** (마케팅 기획서의 '추천 해시태그 전략' 참고) 5개 이상을 추천해주세요. 결과는 제목, 캡션, 해시태그로 명확히 구분해서 보여주세요.

                - ### **11. 이미지 기반 판매 글 (Image-Based Sales Post)**
                    - 제가 **[제품 사진]**과 함께 **[제품 이름] + "판매 글"** 이라고 요청하면, **자연스럽고 편안한 구어체**를 사용하여 사진 속 제품의 매력을 분석하고 다음 두 가지 형식의 글을 작성해주세요:
                        - **1) 인스타그램용:** <제목>, <캡션>(감성+정보), <해시태그 5개 이상> 포함
                        - **2) 블로그용:** <제목>, <서론>, <본론>(사진 속 특징 강조), <결론>, <해시태그 5개 이상> 포함
                    - 두 글 모두 **핵심 가치**와 **고객 변화**를 자연스럽게 녹여내야 합니다.

                - ### **12. 이미지 생성 프롬프트 추천 (Image Generation Prompt Recommendation)**
                    - 제가 '이미지 생성'과 함께 원하는 이미지 컨셉을 알려주면, AI 이미지 생성 툴(미드저니, DALL-E 등)에서 바로 사용할 수 있는 상세한 영어 프롬프트를 3가지 스타일로 제안해주세요. (분위기, 색감, 구도, 스타일 포함, **핵심 가치**와 **고객 변화** 시각화 강조)

                - ### **13. 카드뉴스 기획 (Card News Planning)**
                    - 제가 '카드뉴스 기획'과 함께 주제를 알려주면, 인스타그램에 올릴 4~5장 분량의 상세한 카드뉴스 기획안을 만들어주세요. (전체 제목, 각 장의 핵심 문구 - **핵심 가치/고객 변화** 강조, 각 장에 어울리는 시각적 컨셉, 카드 간의 자연스러운 스토리 흐름, 마지막 장의 행동 유도 문구 포함)
                    
                - ### **14. 릴스 기획 (Reels Planning)**
                    - 제가 '릴스 기획'과 함께 주제나 내용을 알려주면, 시청자의 시선을 사로잡는 15~30초 분량의 인스타그램 릴스 기획안을 만들어주세요. (초반 3초 후킹 아이디어, 주요 장면 구성, 행동 유도 문구, 추천 배경 음악 키워드, 관련 해시태그 포함, **핵심 가치/고객 변화** 강조)

                - ### **15. 블로그 글 작성 (Blog Post Writing)**
                    - 제가 '블로그 글'과 함께 주제를 알려주면, 상품의 장점이나 활용법을 자세히 설명하는 블로그 글 초안을 작성해주세요. 글은 <제목>, <서론>, <본론>(소제목 포함), <결론> 구조를 가지며, **핵심 가치**와 **고객 변화**를 자연스럽게 녹여내세요. 관련 <해시태그>도 5개 이상 추천해주세요.

                - ### **16. 광고 문구 생성 (Ad Copy Generation)**
                    - 제가 '광고 문구'를 요청하면, 인스타그램이나 페이스북 광고에 사용할 짧고 강력한 광고 문구를 3가지 버전으로 만들어주세요. 핵심 고객의 시선을 사로잡는 후킹 포인트와 **핵심 가치**를 담아주세요.

                - ### **17. 콘텐츠 캘린더 아이디어 (Content Calendar Ideas)**
                    - 제가 '콘텐츠 캘린더'와 함께 기간(예: 다음 주, 다음 달)을 알려주면, 해당 기간 동안 발행할 콘텐츠 주제를 5가지 이상 제안해주세요. **핵심 포인트**(시의성, 목표, 문제 해결)를 반드시 고려해주세요.
                    
                - ### **18. 답글 추천 (Reply Recommendation)**
                    - 제가 '답글'과 함께 고객의 댓글이나 리뷰 내용을 전달하면, 해당 내용의 긍정/부정 뉘앙스를 파악하여 공감과 감사를 표현하는 적절한 답글을 3가지 버전으로 제안해주세요. (브랜드 톤앤매너 유지)
                    
                - ### **19. 프로필 피드백 (Profile Feedback)**
                    - 제가 '프로필 피드백'과 함께 현재 인스타그램 또는 블로그 프로필 정보(이미지 설명 포함 가능)를 제공하면, 설정된 핵심 고객, 상품 강점, 마케팅 목표를 기준으로 프로필 사진, 소개글, 링크 등을 어떻게 개선하면 좋을지 구체적인 제안을 3가지 이상 해주세요.
                    
                - ### **20. 경쟁사 분석 (Competitor Analysis)**
                    - 제가 '경쟁사 분석'과 함께 경쟁사의 스토어 캡처 이미지나 설명을 제공하면, 해당 경쟁사의 강점과 약점을 분석해주세요. 그리고 우리 ${brandInfo}상품의 강점(${formData.productStrengths})과 핵심 고객(${formData.targetAge} ${formData.targetGender}, ${formData.targetLifestyle})을 고려하여, 우리가 경쟁사와 차별화할 수 있는 **구체적인 실행 전략**을 3가지 이상 제안해주세요.
                    
                - ### **21. 스마트스토어 상품 상세페이지 (Smartstore Product Description)**
                    - 제가 "상세페이지"와 함께 상품 특징을 요약해서 전달하면, 구매를 유도하는 매력적인 스마트스토어 상품 상세 페이지 문구를 작성해주세요. (소제목 포함, SEO 고려, 핵심 가치 및 고객 변화 강조)

                - ### **22. 스마트스토어 고객 문의 답변 (Smartstore CS Template)**
                    - 제가 "문의 답변"과 함께 문의 유형(예: 배송 문의, 상품 문의)을 알려주면, 해당 유형에 대한 친절하고 정확한 답변 템플릿을 2~3가지 제안해주세요.

                - ### **23. 스마트스토어 리뷰 요청 (Smartstore Review Request)**
                    - 제가 "리뷰 요청"이라고 하면, 구매 고객에게 발송할 수 있는 정중하고 효과적인 리뷰 작성 요청 메시지(톡톡 메시지 등)를 2~3가지 버전으로 제안해주세요.

                - ### **24. 스마트스토어 공지사항 (Smartstore Notice)**
                    - 제가 "공지사항"과 함께 공지 내용(예: 휴무 안내, 이벤트 소식)을 알려주면, 스마트스토어 공지사항에 올릴 간결하고 명확한 안내 문구를 작성해주세요.

                - ### **25. 스마트스토어 기획전 아이디어 (Smartstore Promotion Idea)**
                    - 제가 "기획전 아이디어"와 함께 시즌 또는 주제(예: 추석맞이, 연말 선물)를 알려주면, 해당 내용에 맞는 스마트스토어 기획전 테마와 대표 상품 구성 아이디어를 3가지 이상 제안해주세요.

                - ### **26. 지침서 업데이트 (Instruction Update)**
                    - 제가 '지침서 업데이트'와 함께 수정할 내용을 알려주면, 이 GEMS 지침서의 내용을 더 효과적으로 개선하여 새로운 버전의 지침서를 만들어주세요.
                
                - ### **공통 규칙**
                    - 모든 답변은 **'${formData.gemsTone}'** 톤앤매너를 유지하고, 항상 우리의 핵심 고객의 입장에서 생각해주세요.
                    - **모든 아이디어는 마케팅 기획서에서 도출된 핵심 컨셉(슬로건)과 일관된 메시지를 전달해야 합니다.**
            `;
            generateContent(finalPrompt, formData.productName);
        });

        function downloadBlob(blob, filename) {
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
        }

        downloadBtn.addEventListener('click', () => {
            const productName = document.getElementById('product-name').value || '결과물';
            
            if (outputTabPlannerBtn.classList.contains('active')) {
                if (!plannerRawMarkdown) { return; }
                const filename = `${productName}_기획서.md`;
                const blob = new Blob([plannerRawMarkdown], { type: 'text/markdown;charset=utf-8' });
                downloadBlob(blob, filename);
            } else if (outputTabGemsBtn.classList.contains('active')) {
                if (!gemsRawMarkdown) { return; }
                const filename = `${productName}_GEMS_지침서.txt`;
                const blob = new Blob([gemsRawMarkdown], { type: 'text/plain;charset=utf-8' });
                downloadBlob(blob, filename);
            }
        });

        copyGemsBtn.addEventListener('click', () => {
            if (!gemsRawMarkdown) { return; }
            const textarea = document.createElement('textarea');
            // Remove markdown formatting for plain text copy
            let plainText = gemsRawMarkdown.replace(/##\s+/g, '').replace(/###\s+/g, '').replace(/-\s+/g, '').replace(/\*\*/g, '').replace(/`/g, '');
            textarea.value = plainText;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                copyGemsBtn.textContent = '✅ 복사 완료!';
                setTimeout(() => {
                    copyGemsBtn.textContent = '📋 지침서 복사';
                }, 2000);
            } catch (err) {
                console.error('클립보드 복사 실패:', err);
                copyGemsBtn.textContent = '❌ 복사 실패';
                setTimeout(() => {
                    copyGemsBtn.textContent = '📋 지침서 복사';
                }, 2000);
            }
            document.body.removeChild(textarea);
        });
    </script>
</body>
</html>

